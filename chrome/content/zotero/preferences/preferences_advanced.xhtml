<!--
    ***** BEGIN LICENSE BLOCK *****
    
    Copyright © 2006–2022 Center for History and New Media
                     George Mason University, Fairfax, Virginia, USA
                     http://zotero.org
    
    This file is part of Zotero.
    
    Zotero is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.
    
    Zotero is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.
    
    You should have received a copy of the GNU Affero General Public License
    along with Zotero.  If not, see <http://www.gnu.org/licenses/>.
    
    ***** END LICENSE BLOCK *****
-->

<vbox id="zotero-prefpane-advanced">
	<vbox class="main-section" id="zotero-prefpane-advanced-general-tab">
		<html:h1>&zotero.preferences.prefpane.general;</html:h1>

		<groupbox id="zotero-prefpane-advanced-miscellaneous">
			<html:label><html:h2>&zotero.preferences.miscellaneous;</html:h2></html:label>
			
			<hbox align="center">
				<checkbox label="&zotero.preferences.autoUpdate;" preference="extensions.zotero.automaticScraperUpdates" native="true"/>
				<button id="updateButton" style="margin-top:0" label="&zotero.preferences.updateNow;"
					oncommand="Zotero_Preferences.Advanced.updateTranslators()"/>
			</hbox>
			
			<checkbox label="&zotero.preferences.reportTranslationFailure;" preference="extensions.zotero.reportTranslationFailure" native="true"/>
			
			<hbox align="center">
				<label value="&zotero.bibliography.locale.label;"/>
				<menulist id="locale-menu"
						onblur="if (!Zotero.isMac) Zotero_Preferences.Advanced.onLocaleChange()"
						native="true">
					<menupopup onpopuphidden="Zotero_Preferences.Advanced.onLocaleChange()"/>
				</menulist>
			</hbox>
		</groupbox>
		
		<groupbox>
			<html:label><html:h2>OpenURL</html:h2></html:label>
			
			<hbox>
				<menulist id="openurl-menu" native="true">
					<menupopup
							id="openurl-primary-popup"
							onpopupshowing="Zotero_Preferences.Advanced.handleOpenURLPopupShowing(event)"
							oncommand="Zotero_Preferences.Advanced.handleOpenURLSelected(event)">
						<menuitem label="&zotero.preferences.openurl.choose;"/>
					</menupopup>
				</menulist>
			</hbox>
			
			<hbox align="center">
				<label value="&zotero.preferences.openurl.server;"/>
				<html:input type="text" id="openURLServerField" style="-moz-box-flex: 1;"
					oninput="Zotero_Preferences.Advanced.onOpenURLCustomized();"
					preference="extensions.zotero.openURL.resolver"
				/>
			</hbox>
		
			<hbox align="center">
				<label value="&zotero.preferences.openurl.version;" control="openURLVersionMenu"/>
				<menulist id="openURLVersionMenu"
						oncommand="Zotero_Preferences.Advanced.onOpenURLCustomized();"
						preference="extensions.zotero.openURL.version"
						native="true">
					<menupopup>
						<menuitem label="0.1" value="0.1"/>
						<menuitem label="1.0" value="1.0"/>
					</menupopup>
				</menulist>
			</hbox>
		</groupbox>
		
		<groupbox id="zotero-prefpane-advanced-advancedConfiguration">
			<html:label><html:h2>&zotero.preferences.advanced.advancedConfiguration;</html:h2></html:label>
			
			<hbox id="zotero-prefpane-advanced-openbuttons" align="center" style="display: block">
				<button id="config-editor"
					label="&zotero.preferences.configEditor;"
					oncommand="Zotero_Preferences.openInViewer('about:config')"/>
				<button id="memory-info"
					label="Memory Info"
					oncommand="Zotero_Preferences.openInViewer('about:memory')"
					hidden="true"/>
			</hbox>
		</groupbox>
	</vbox>
	
	<vbox class="main-section">
		<html:h1>&zotero.preferences.advanced.filesAndFolders;</html:h1>

		<groupbox>
			<html:label><html:h2>&zotero.preferences.attachmentBaseDir.caption;</html:h2></html:label>
			
			<!-- This doesn't wrap without an explicit width -->
			<vbox>
				<description style="width: 45em;">&zotero.preferences.attachmentBaseDir.message;</description>
			</vbox>
			
			<hbox align="center">
				<label value="&zotero.preferences.attachmentBaseDir.basePath;"/>
				<html:input type="text" id="baseAttachmentPath"
					preference="extensions.zotero.baseAttachmentPath"
					readonly="true"
					flex="1"
					tabindex="-1"/>
				<button id="baseAttachmentPathButton"
					label="&zotero.preferences.attachmentBaseDir.selectBasePath;"
					oncommand="Zotero_Preferences.Attachment_Base_Directory.choosePath()"/>
			</hbox>
			
			<hbox>
				<button id="resetBasePath"
					label="&zotero.preferences.attachmentBaseDir.resetBasePath;"
					oncommand="Zotero_Preferences.Attachment_Base_Directory.clearPath()"
					data-search-strings="attachmentBasePath.clearBasePath.message"/>
			</hbox>
			
		</groupbox>
		
		<groupbox>
			<html:label><html:h2>&zotero.preferences.dataDir;</html:h2></html:label>
			
			<radiogroup id="data-dir"
					preference="extensions.zotero.useDataDir">
				<radio id="default-data-dir" label="&zotero.preferences.dataDir.useProfile;" value="false"/>
				<hbox>
					<radio label="&zotero.preferences.dataDir.custom;" value="true"/>
					<html:input type="text" id="data-dir-path" preference="extensions.zotero.dataDir"
						readonly="true" style="-moz-box-flex: 1;"/>
					<button label="&zotero.preferences.dataDir.choose;"
						oncommand="return Zotero_Preferences.Advanced.chooseDataDir(event)"/>
				</hbox>
			</radiogroup>
			
			<vbox id="command-line-data-dir" hidden="true">
				<description id="command-line-data-dir-path"/>
				<label value="&zotero.preferences.dataDir.viaCommandLine;"/>
			</vbox>
			
			<hbox>
				<button label="&zotero.preferences.dataDir.reveal;"
					oncommand="Zotero.DataDirectory.reveal()"/>
				<button id="migrate-data-dir" label="&zotero.preferences.dataDir.migrate;"
					oncommand="Zotero_Preferences.Advanced.migrateDataDirectory()" hidden="true"/>
			</hbox>
		</groupbox>
		
		<groupbox>
			<html:label><html:h2>&zotero.preferences.dbMaintenance;</html:h2></html:label>
			
			<hbox style="display: block">
				<button label="&zotero.preferences.dbMaintenance.integrityCheck;"
					oncommand="Zotero_Preferences.Advanced.runIntegrityCheck(this)"/>
				<button id="reset-translators-button"
					label="&zotero.preferences.dbMaintenance.resetTranslators;"
					oncommand="Zotero_Preferences.Advanced.resetTranslators()"/>
				<button id="reset-styles-button"
					label="&zotero.preferences.dbMaintenance.resetStyles;"
					oncommand="Zotero_Preferences.Advanced.resetStyles()"/>
			</hbox>
		</groupbox>
	</vbox>

	<vbox class="main-section" id="zotero-prefpane-advanced-keys-tab">
		<html:h1>&zotero.preferences.advanced.keys;</html:h1>
	
		<html:div id="zotero-keys-grid">
			<label value="&zotero.preferences.keys.newItem;" control="textbox-newItem"/>
			<label class="modifier"/>
			<html:input type="text" id="textbox-newItem" maxlength="1" size="1" preference="extensions.zotero.keys.newItem"/>

			<label value="&zotero.preferences.keys.newNote;" control="textbox-newNote"/>
			<label class="modifier"/>
			<html:input type="text" id="textbox-newNote" maxlength="1" size="1" preference="extensions.zotero.keys.newNote"/>

			<label value="&zotero.preferences.keys.focusLibrariesPane;" control="textbox-library"/>
			<label class="modifier"/>
			<html:input type="text" id="textbox-library" maxlength="1" size="1" preference="extensions.zotero.keys.library"/>

			<label value="&zotero.preferences.keys.quicksearch;" control="textbox-quicksearch"/>
			<label class="modifier"/>
			<html:input type="text" id="textbox-quicksearch" maxlength="1" size="1" preference="extensions.zotero.keys.quicksearch"/>

			<label value="&zotero.preferences.keys.copySelectedItemCitationsToClipboard;" control="textbox-copySelectedItemCitationsToClipboard"/>
			<label class="modifier"/>
			<html:input type="text" id="textbox-copySelectedItemCitationsToClipboard" maxlength="1" size="1"
					preference="extensions.zotero.keys.copySelectedItemCitationsToClipboard"
					oninput="if (Zotero_Preferences.Export) { Zotero_Preferences.Export.updateQuickCopyInstructions(); }"/>

			<label value="&zotero.preferences.keys.copySelectedItemsToClipboard;" control="textbox-copySelectedItemsToClipboard"/>
			<label class="modifier"/>
			<html:input type="text" id="textbox-copySelectedItemsToClipboard" maxlength="1" size="1"
					preference="extensions.zotero.keys.copySelectedItemsToClipboard"
					oninput="if (Zotero_Preferences.Export) { Zotero_Preferences.Export.updateQuickCopyInstructions(); }"/>

			<label value="&zotero.preferences.keys.toggleAllRead;" control="textbox-toggleAllRead"/>
			<label class="modifier"/>
			<html:input type="text" id="textbox-toggleAllRead" maxlength="1" size="1" preference="extensions.zotero.keys.toggleAllRead"/>
		</html:div>
		
		<label class="statusLine" value="&zotero.preferences.keys.changesTakeEffect;"/>
		
		<separator/>				
	</vbox>
	<vbox class="main-section" id="zotero-prefpane-advanced-feeds-tab">
		<html:h1>&zotero.preferences.feeds;</html:h1>

		<groupbox>
			<hbox>
				<hbox align="center">
					<label value="&zotero.preferences.feeds.sorting.label;"/>
					<menulist id="feed-sort" preference="extensions.zotero.keys.sortAscending" native="true">
						<menupopup>
							<menuitem label="&zotero.preferences.feeds.sorting.newest;" value="false"/>
							<menuitem label="&zotero.preferences.feeds.sorting.oldest;" value="true"/>
						</menupopup>
					</menulist>
				</hbox>
			</hbox>
		</groupbox>
		
		<groupbox id="zotero-prefpane-advanced-feeds-feedDefaults">
			<html:label><html:h2>&zotero.preferences.feeds.feedDefaults;</html:h2></html:label>
			<hbox>
				<hbox align="center">
					<label value="&zotero.feedSettings.refresh.label1;"/>
					<html:input class="html-input" type="number" min="1" step="1" size="3" data-preference="feeds.defaultTTL"/>
					<label value="&zotero.feedSettings.refresh.label2;"/>
				</hbox>
			</hbox>
			<hbox>
				<hbox align="center">
					<label value="&zotero.feedSettings.cleanupReadAfter.label1;"/>
					<html:input class="html-input" type="number" min="1" step="1" size="2" data-preference="feeds.defaultCleanupUnreadAfter"/>
					<label value="&zotero.feedSettings.cleanupReadAfter.label2;"/>
				</hbox>
			</hbox>
			<hbox>
				<hbox align="center">
					<label value="&zotero.feedSettings.cleanupUnreadAfter.label1;"/>
					<html:input class="html-input" type="number" min="1" step="1" size="2" data-preference="feeds.defaultCleanupReadAfter"/>
					<label value="&zotero.feedSettings.cleanupUnreadAfter.label2;"/>
				</hbox>
			</hbox>
		</groupbox>
	</vbox>
</vbox>
